:root{
    --bg1:#0f172a; --bg2:#1e293b;
    --accent:#ffd166; --good:#22c55e; --mid:#f59e0b; --bad:#ef4444;
    --card1:#06b6d4; --card2:#8b5cf6; --card3:#ec4899;
    --text:#e5e7eb; --muted:#94a3b8;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;
    color:var(--text);
    background:
      radial-gradient(1200px 500px at 80% -10%, #334155, transparent 60%),
      radial-gradient(800px 400px at -10% 110%, #1f2937, transparent 60%),
      linear-gradient(135deg, #0b1220, #111827 60%, #0b1220);
  }
  
  /* Gate */
  .gate{position:fixed; inset:0; display:grid; place-items:center; z-index:999;
    background:linear-gradient(135deg,#101827aa,#0f172acc); backdrop-filter:blur(8px);}
  .gate-card{
    background:linear-gradient(180deg,#0f172a,#111827);
    border:1px solid #233044; border-radius:24px; padding:32px;
    width:min(720px,92vw); box-shadow:0 20px 60px #0008;
  }
  .title{margin:0 0 8px; font-size:clamp(24px,3.2vw,36px); color:#fff}
  .subtitle{margin:0 0 18px; color:var(--muted)}
  .hint{margin-top:14px; color:var(--muted); font-size:14px}
  .difficulty-buttons{display:flex; gap:16px; flex-wrap:wrap}
  .diff-btn{
    flex:1; min-width:140px; padding:14px 18px; border:0; border-radius:14px; cursor:pointer;
    color:#0b1220; font-weight:700; font-size:18px; letter-spacing:.3px;
    background:linear-gradient(135deg,#ffe08a,#ffd166);
    box-shadow:0 10px 24px #0006; transition:.2s transform,.2s box-shadow,.25s filter;
  }
  .diff-btn:disabled{filter:grayscale(.6); cursor:not-allowed; opacity:.7}
  .diff-btn:hover:not(:disabled){transform:translateY(-3px); box-shadow:0 16px 30px #0008}
  .diff-btn:nth-child(2){background:linear-gradient(135deg,#a5b4fc,#60a5fa)}
  .diff-btn:nth-child(3){background:linear-gradient(135deg,#fca5a5,#fb7185)}
  
  /* Topbar */
  .topbar{
    position:sticky; top:0; z-index:10; display:grid; grid-template-columns:1fr auto 1fr;
    align-items:center; gap:16px; padding:12px 18px;
    background:linear-gradient(180deg,#0f172acc,#0f172aee);
    border-bottom:1px solid #233044;
  }
  .crumb{opacity:.9}
  .round{text-align:center; font-weight:700; color:#fff}
  .timer-wrap{display:flex; flex-direction:column; gap:8px}
  .timer-row{display:flex; justify-content:flex-end; gap:10px; align-items:center}
  #timerDisplay{font-variant-numeric:tabular-nums; font-weight:700}
  .timer-bar{height:10px; background:#1f2a3c; border-radius:999px; overflow:hidden; width:min(520px,50vw); margin-left:auto}
  #timerBar{
    height:100%; width:100%;
    background:linear-gradient(90deg,#10b981,#22d3ee,#fbbf24);
    background-size:200% 100%;
    animation:flow 3s linear infinite;
  }
  @keyframes flow{0%{background-position:0 0}100%{background-position:200% 0}}
  .low-time #timerBar{background:linear-gradient(90deg,#ef4444,#f97316,#f59e0b)}
  
  /* Layout */
  .wrap{
    display:grid; grid-template-columns:1.6fr 1fr; gap:22px; width:min(1200px,94vw);
    margin:30px auto 60px; align-items:start;
  }
  .cards{
    grid-column:1 / -1; display:flex; gap:26px; justify-content:center; flex-wrap:wrap;
    perspective:1100px; padding-top:10px;
  }
  
  /* Cards */
  .card{
    width:260px; height:170px; border-radius:18px; cursor:pointer; position:relative;
    transform-style:preserve-3d; transition:transform .7s cubic-bezier(.2,.8,.2,1),
    filter .25s, box-shadow .25s;
    box-shadow:0 20px 40px #0006; border:1px solid #2b3b50;
    background:linear-gradient(135deg,#101827,#0f172a);
  }
  .card:hover{transform:translateY(-6px) rotateX(2deg); filter:brightness(1.05)}
  .card:nth-child(1){--c:var(--card1)}
  .card:nth-child(2){--c:var(--card2)}
  .card:nth-child(3){--c:var(--card3)}
  .card-front,.card-back{
    position:absolute; inset:0; display:grid; place-items:center; border-radius:18px;
    backface-visibility:hidden; padding:14px; text-align:center;
  }
  .card-front{
    color:#fff; font-weight:800; letter-spacing:.5px;
    background:radial-gradient(140% 100% at 100% 0, color-mix(in oklab, var(--c) 70%, #fff 5%), transparent 50%),
               linear-gradient(135deg, color-mix(in oklab, var(--c) 65%, #111 20%), #111827);
    border:1px solid color-mix(in oklab, var(--c) 55%, #233044);
  }
  .card-back{
    transform:rotateY(180deg); background:linear-gradient(180deg,#0f172a,#0b1220);
    color:#e2e8f0; font-size:15px; line-height:1.35; border:1px solid #233044;
  }
  .card.flipped .card-inner{transform:rotateY(180deg)}
  .card-inner{position:absolute; inset:0; transform-style:preserve-3d; transition:transform .7s cubic-bezier(.2,.8,.2,1)}
  
  /* QA */
  .qa{
    grid-column:1; background:linear-gradient(180deg,#0f172a,#0b1220);
    border:1px solid #233044; border-radius:18px; padding:18px; display:none;
    box-shadow:0 16px 40px #0006;
  }
  .q{margin:0 0 12px; font-weight:800; color:#fff}
  .candidate{margin:12px 0 6px}
  .candidate h4{margin:0 0 8px; color:#e5e7eb; font-size:14px; opacity:.9}
  .bubble{
    background:#0b1220; border:1px solid #2b3b50; border-radius:12px;
    padding:12px; color:#e5e7eb; line-height:1.45;
  }
  .choices{display:flex; gap:10px; margin-top:12px}
  .choice{
    flex:1; padding:12px 14px; border-radius:12px; border:1px solid #334155; cursor:pointer;
    font-weight:800; letter-spacing:.2px; color:#0b1220; box-shadow:0 10px 22px #0006;
  }
  .choice.hire{background:linear-gradient(135deg,#86efac,#22c55e)}
  .choice.maybe{background:linear-gradient(135deg,#fde68a,#f59e0b)}
  .choice.reject{background:linear-gradient(135deg,#fca5a5,#ef4444)}
  .choice:hover{filter:brightness(1.05); transform:translateY(-2px)}
  
  /* Log */
  .log{
    grid-column:2; position:sticky; top:84px; align-self:start;
    background:linear-gradient(180deg,#0f172a,#0b1220);
    border:1px solid #233044; border-radius:18px; padding:16px; box-shadow:0 14px 36px #0006;
  }
  .log h3{margin:4px 0 12px}
  .log-body{max-height:320px; overflow:auto; display:flex; flex-direction:column; gap:8px}
  .log-body p{margin:0; background:#101a2a; border:1px solid #243244; padding:8px 10px; border-radius:10px}
  .muted{color:var(--muted)}
  
  /* Stress & time-up */
  .stress-overlay{
    position:absolute; inset:auto auto -16px auto; transform:translateY(100%);
    margin:auto; background:#0b1220; border:1px solid #334155; color:#e5e7eb;
    padding:8px 10px; border-radius:10px; font-size:14px; box-shadow:0 10px 20px #0007;
    animation:pop .2s ease-out;
  }
  @keyframes pop{from{opacity:0; transform:translateY(130%)} to{opacity:1; transform:translateY(100%)}}
  .cards.shake{animation:shake .45s ease-in-out 0s 1}
  @keyframes shake{
    0%{transform:translateX(0)} 20%{transform:translateX(-6px)} 40%{transform:translateX(6px)}
    60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} 100%{transform:translateX(0)}
  }
  .cards.time-up .card{filter:saturate(.6) brightness(.9)}
  .low-time .cards .card-front{filter:brightness(.95)}
  
  /* Results */
  .results{display:none; place-items:center; min-height:100vh; padding:40px}
  .results-card{
    width:min(900px,92vw); background:linear-gradient(180deg,#0f172a,#0b1220);
    border:1px solid #233044; border-radius:22px; padding:24px; box-shadow:0 18px 44px #0008;
  }
  .summary-list{display:flex; flex-direction:column; gap:12px; margin:14px 0}
  .summary-list p{
    margin:0; padding:12px; background:#0b1220; border:1px solid #233044; border-radius:12px;
  }
  .ai-placeholder{margin-top:12px; padding:12px; background:#0b1220; border:1px dashed #334155; border-radius:12px}
  
  /* Responsive */
  @media (max-width:960px){
    .wrap{grid-template-columns:1fr; gap:18px}
    .log{position:relative; top:auto}
    .timer-bar{width:100%}
  }
  